{% extends "layout.html" %}

{% block title %}Dive into Bathymetry{% endblock %}

{% block styles %}
    {{ super() }}
    <link href="/static/css/homepage.css" rel="stylesheet">
    <link href="/static/css/rules.css" rel="stylesheet">
{% endblock %}

{% block content %}

        
    <div class="chose">
        <p class="tuto-intro">First time in here ? Check the <span class="bold">tutorial <i style="width: 20px" class="fa-solid fa-graduation-cap"></i></span> to learn a bit more about bathymetry before diving into the BENTHLE !</p>
        <!-- <button value="tutorial" onclick="location.href='/tutorial'">TUTORIAL</button> <i class="fa-solid fa-lightbulb"></i> -->
    </div>

    <div id="choose-difficulty">
        <h4 class="play-title">Unlock the secrets of the benthic zone</h4>
        <form class="chose" method="post" action="{{ url_for('homepage') }}">
            <button class="btn-loading" type="submit" name="difficulty" value="easy">BATHYAL</button>
            <i {% if highest_completed_exercise >= 1 %}style="display: none;"{% endif %} class="fa-solid fa-lock locker"></i>
            <button {% if highest_completed_exercise >= 1 %}enabled{% else %}disabled style="filter: blur(2px) grayscale(100%); cursor: none;"{% endif %} class="btn-loading" type="submit" name="difficulty" value="medium">ABYSSAL</button>
            <i {% if highest_completed_exercise >= 2 or highest_completed_exercise < 1 %}style="display: none;"{% endif %} class="fa-solid fa-lock locker"></i>
            <button {% if highest_completed_exercise >= 2 %}enabled{% else %}disabled style="filter: blur(2px) grayscale(100%); cursor: none;"{% endif %} class="btn-loading" type="submit" name="difficulty" value="hard">HADAL</button>
        </form>
    </div>

    <div class="pop-up" style="display: none;" id="rules-text">
        <div class="exit-game"><i class="fa-solid fa-xmark fa-xl"></i></div>
        <h1 class="title">How to play</h1>
        <p>BENTHLE has <span class="bold">two main objectives</span> : finding the <span class="bold">deepest</span> AND the <span class="bold">shallowest</span> point on the map.</p>
        <p>Each time you flip a tile, you score 1 point. When you flip one of the objectives, your score decrease by 2 points. The smaller your score, the better !</p>
        <h1 class="title">Levels &amp; features</h1>
        <p>BENTHLE's levels are named after the benthic zones. The "deeper" we go, the harder it gets. The bathyal zone is the easiest level, the abyssal zone is intermediate, and the hadal zone is the hardest.</p>
        <p><span class="bold">Visible tiles:</span> Each level starts with a variable number of visible tiles, starting from 3 for the easiest level, down to 1 for the hardest.</p>
        <p><span class="bold">Benthic wisdom:</span> When you flip a tile that is 1 tile away from the deepest or the shallowest point, a yellow flash will appear. On the last level, benthic wisdom is unavailable.</p>
    </div>

    <div class="pop-up" style="display: none;" id="my-maps">
        <div class="exit-game"><i class="fa-solid fa-xmark fa-xl"></i></div>
        <h1 class="title">Map's collection</h1>
        <p>Feature not available yet</p>
    </div>

    <div class="pop-up" style="display: none;" id="my-stats">
        <div class="exit-game"><i class="fa-solid fa-xmark fa-xl"></i></div>
        <h1 class="title">Statistics</h1>
        <p>Feature not available yet</p>
    </div>

<script>
    $(document).ready(function () {

        function showPopup(popupId) {
        $('.chose, .play-title, footer').hide();
        $(popupId).fadeIn();
        }

        function hidePopup(popupId) {
            $(popupId).hide();
            $('.chose, .play-title, footer').fadeIn();
        }

        if (localStorage.getItem('cameFromTutorial') === 'true') {
            showPopup('#rules-text');
            localStorage.removeItem('cameFromTutorial');
        }

        $('#rules').on('click', function () {
        showPopup('#rules-text');
        });

        $('#my-maps-btn').on('click', function () {
            showPopup('#my-maps');
        });

        $('#my-stats-btn').on('click', function () {
            showPopup('#my-stats');
        });

        $('.exit-game').on('click', function () {
            hidePopup('#rules-text');
            hidePopup('#my-maps');
            hidePopup('#my-stats');
        });
        
    });
</script>

{% endblock %}